{% extends '@EasyAdmin/page/content.html.twig' %}

{% block content %}
	<canvas id="visitsChart"></canvas>
	<div class="container">
		<h2 class="mb-4">Statistiques des visites</h2>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Source</th>
					<th>Nombre de visites</th>
				</tr>
			</thead>
			<tbody>
				{% for stat in stats %}
					<tr>
						<td>{{ stat.referrer ?: 'Direct' }}</td>
						<td>{{ stat.visitCount }}</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="2" class="text-center">Aucune donnÃ©e disponible</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	<script>
		var visitsData = {
labels: {{ stats|map(s => s.referrer ?: 'Direct')|json_encode()|raw }},
datasets: [
{
label: 'Nombre de visites',
data: {{ stats|map(s => s.visitCount)|json_encode()|raw }},
backgroundColor: 'rgba(54, 162, 235, 0.5)',
borderColor: 'rgba(54, 162, 235, 1)',
borderWidth: 1
}
]
};

console.log("ðŸ“Š DonnÃ©es des visites :", visitsData);
	</script>

{% endblock %}
{% block importmap %}{# do NOT call parent() #}{{ importmap(['app', 'graphique','chart.umd.js']) }}

{% endblock %}
