{% extends '@EasyAdmin/page/content.html.twig' %}

{% block content %}
	<div class="container">
		<h2 class="mb-4">ðŸ“Š Statistiques</h2>

		<!-- Filtres -->


		<!-- ðŸ“Š VISITES -->
		<h3>ðŸ“Š Visites par source</h3>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Source</th>
					<th>Nombre de visites</th>
				</tr>
			</thead>
			<tbody>
				{% for stat in visitStats %}
					<tr>
						<td>{{ stat.source }}</td>
						<td>{{ stat.visitCount }}</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="2" class="text-center">Aucune donnÃ©e disponible</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

		<!-- ðŸ“¦ COMMANDES -->
		<h3>ðŸ“¦ Commandes par mois</h3>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Mois</th>
					<th>Nombre de commandes</th>
				</tr>
			</thead>
			<tbody>
				{% for stat in orderStats %}
					<tr>
						<td>{{ stat.month }}</td>
						<td>{{ stat.orderCount }}</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="2" class="text-center">Aucune donnÃ©e disponible</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

		<h3>ðŸ’° Chiffre d'affaires par mois</h3>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Mois</th>
					<th>Revenu total (â‚¬)</th>
				</tr>
			</thead>
			<tbody>
				{% for stat in revenueStats %}
					<tr>
						<td>{{ stat.month }}</td>
						<td>{{ stat.totalRevenue|number_format(2, ',', ' ') }}
							â‚¬</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="2" class="text-center">Aucune donnÃ©e disponible</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

		<!-- âš¡ PERFORMANCES -->
		<h3>âš¡ Performances Web</h3>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Indicateur</th>
					<th>Valeur</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>Temps de chargement moyen</td>
					<td>{{ performanceStats.avgLoadTime }}
						s</td>
				</tr>
				<tr>
					<td>Temps de rÃ©ponse API</td>
					<td>{{ performanceStats.apiResponseTime }}</td>
				</tr>
				<tr>
					<td>Taux d'erreur</td>
					<td>{{ performanceStats.errorRate }}</td>
				</tr>
			</tbody>
		</table>
	</div>
{% endblock %}
{% block importmap %}{# do NOT call parent() #}{{ importmap(['app', 'graphique','chart.umd.js']) }}
{% endblock %}
